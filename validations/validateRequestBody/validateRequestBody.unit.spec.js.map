{"version":3,"sources":["../../src/validations/validateRequestBody/validateRequestBody.unit.spec.js"],"names":["validateRequestBody","require","requestBodyProp","isValidDate","fakeRequest","body","storeId","vendorId","priceFamily","dateFrom","dateTo","ignoreThis","ignoreThisToo","invalidValidator","invalidValidatorWithParam","param","describe","test","reqBodyDefs","result","expect","allValid","toBe","errors","length"],"mappings":";;AAAA,IAAMA,sBAAsBC,gCAA5B;AACA,IAAMC,kBAAkBD,4BAAxB;;eACwBA,4B;IAAhBE,W,YAAAA,W;;AAER,IAAMC,cAAc;AAClBC,QAAM;AACJC,aAAS,QADL;AAEJC,cAAU,QAFN;AAGJC,iBAAa,QAHT;AAIJC,cAAU,YAJN;AAKJC,YAAQ,YALJ;AAMJC,gBAAY,CANR;AAOJC,mBAAe;AAPX;AADY,CAApB;;AAYA,IAAMC,mBAAmB,SAAnBA,gBAAmB;AAAA,SAAM,IAAI,CAAV;AAAA,CAAzB;AACA,IAAMC,4BAA4B,SAA5BA,yBAA4B;AAAA,SAAYC,KAAZ;AAAA,CAAlC;;AAEAC,SAAS,uCAAT,EAAkD,YAAM;AACtDC,OAAK,yFAAL,EAAgG,YAAM;AACpG,QAAMC,cAAc,CAClBhB,gBAAgB,SAAhB,CADkB,EAElBA,gBAAgB,UAAhB,CAFkB,EAGlBA,gBAAgB,aAAhB,CAHkB,EAIlBA,gBAAgB,UAAhB,EAA4BC,WAA5B,CAJkB,EAKlBD,gBAAgB,QAAhB,EAA0BC,WAA1B,CALkB,EAMlBD,gBAAgB,YAAhB,EAA8B,IAA9B,EAAoC,IAApC,CANkB,EAOlBA,gBAAgB,eAAhB,EAAiC,IAAjC,EAAuC,IAAvC,CAPkB,CAApB;AASA,QAAMiB,SAASnB,oBAAoBI,WAApB,EAAiCc,WAAjC,CAAf;AACAE,WAAOD,OAAOE,QAAd,EAAwBC,IAAxB,CAA6B,IAA7B;AACAF,WAAOD,OAAOI,MAAP,CAAcC,MAArB,EAA6BF,IAA7B,CAAkC,CAAlC;AACD,GAbD;AAcAL,OAAK,wFAAL,EAA+F,YAAM;AACnG,QAAMC,cAAc,CAClBhB,gBAAgB,SAAhB,CADkB,EAElBA,gBAAgB,UAAhB,EAA4BY,yBAA5B,CAFkB,EAGlBZ,gBAAgB,aAAhB,EAA+BW,gBAA/B,CAHkB,EAIlBX,gBAAgB,UAAhB,EAA4BC,WAA5B,CAJkB,EAKlBD,gBAAgB,QAAhB,EAA0BY,yBAA1B,CALkB,EAMlBZ,gBAAgB,YAAhB,EAA8B,IAA9B,EAAoC,KAApC,CANkB,EAOlBA,gBAAgB,eAAhB,EAAiC,IAAjC,EAAuC,IAAvC,CAPkB,EAQlBA,gBAAgB,aAAhB,CARkB,CAApB;AAUA,QAAMiB,SAASnB,oBAAoBI,WAApB,EAAiCc,WAAjC,CAAf;AACAE,WAAOD,OAAOE,QAAd,EAAwBC,IAAxB,CAA6B,KAA7B;AACAF,WAAOD,OAAOI,MAAP,CAAcC,MAArB,EAA6BF,IAA7B,CAAkC,CAAlC;AACD,GAdD;AAeD,CA9BD","file":"validateRequestBody.unit.spec.js","sourcesContent":["const validateRequestBody = require('./validateRequestBody');\nconst requestBodyProp = require('./requestBodyProp');\nconst { isValidDate } = require('../../validations');\n\nconst fakeRequest = {\n  body: {\n    storeId: 'STR001',\n    vendorId: 'VND001',\n    priceFamily: 'PRC001',\n    dateFrom: '2018-03-11',\n    dateTo: '2018-03-17',\n    ignoreThis: 0,\n    ignoreThisToo: null,\n  },\n};\n\nconst invalidValidator = () => 1 + 1;\nconst invalidValidatorWithParam = param => `${param} notboolean`;\n\ndescribe('utils/validations/validateRequestBody', () => {\n  test('Should pass if req body complied with the definition. All required and All Valid Values', () => {\n    const reqBodyDefs = [\n      requestBodyProp('storeId'),\n      requestBodyProp('vendorId'),\n      requestBodyProp('priceFamily'),\n      requestBodyProp('dateFrom', isValidDate),\n      requestBodyProp('dateTo', isValidDate),\n      requestBodyProp('ignoreThis', null, true),\n      requestBodyProp('ignoreThisToo', null, true),\n    ];\n    const result = validateRequestBody(fakeRequest, reqBodyDefs);\n    expect(result.allValid).toBe(true);\n    expect(result.errors.length).toBe(0);\n  });\n  test('Should fail if req body did not comply with the definition. Invalid validators passed.', () => {\n    const reqBodyDefs = [\n      requestBodyProp('storeid'),\n      requestBodyProp('vendorId', invalidValidatorWithParam),\n      requestBodyProp('priceFamily', invalidValidator),\n      requestBodyProp('dateFrom', isValidDate),\n      requestBodyProp('dateTo', invalidValidatorWithParam),\n      requestBodyProp('ignoreThis', null, false),\n      requestBodyProp('ignoreThisToo', null, true),\n      requestBodyProp('NONEXISTENT'),\n    ];\n    const result = validateRequestBody(fakeRequest, reqBodyDefs);\n    expect(result.allValid).toBe(false);\n    expect(result.errors.length).toBe(5);\n  });\n});\n"]}